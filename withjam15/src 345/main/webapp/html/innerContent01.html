
<meta charset="UTF-8">


<script src='../js/jquery-1.11.1.js'></script>
<script type="text/javascript" src="../js/jquery.min.js"></script>

<script type="text/javascript"
	src="../js/createjs/preloadjs-NEXT.min.js"></script>
<script type="text/javascript"
	src="../js/createjs/soundjs-NEXT.combined.js"></script>
<script type="text/javascript"
	src="../js/createjs/flashaudioplugin-NEXT.combined.js"></script>

<script src="//code.createjs.com/createjs-2014.12.12.min.js"></script>
<script src="../js/recordmp3js/recordmp3.js"></script>


<style>
#contentProfile {
	width: 70px;
	height: 70px;
}

.replyImg {
	width: 35px;
	height: 35px;
}

#buttonPlay {
	width: 40px;
	height: 40px;
}

.c_td01 {
	width: 15%;
}

.c_td02 {
	width: 10%;
}

.c_td03 {
	width: 50%;
}

.c_td04 {
	width: 25%;
}

#contentTable {
	width: 100%;
	height: 100px;
	text-align: center;
}

#deleteImg {
	width: 12px;
	height: 12px;
}

.content_Icon {
	width: 15px;
	height: 15px;
}

textarea {
	width: 99%;
	overflow: visible;
	/* border: 2px solid #765942; */
	border-radius: 10px;
	/* height: 60px; */
	/* width: 230px; */
}

#contentTitle {
	font-size: 20px;
}

.contentDate {
	color: #333;
}

.replyFontSize {
	font-size: 13px;
}

.testBorder {
	border: 1px solid black;
}

.mute {
	background-color: #ccf;
}
.playerBtn{
	width: 45px;
	height: 45px;
}
#titleSize{
	font-size: 20px;
}
#writerSize{
	font-size: 15px;
}
#speaker{
	width: 15px;
	height: 15px;
}
#slider{
	width: 70px;
	height: 13px;
}
#profileImg {
	width: 30px;
	height: 30px;
}
.writerName{
	width: 80px;
	text-align: left;
}
.pbtns{
	width: 100%;
}
.totalWidth{
	 width: 380px;
}
audio{
	width: 270px;
}
.location{
	position: fixed;
	_position: absolute;
	
	z-index: 99;
	 
	bottom: 0px;
	right: 106px;

}
.secretDiv{
	width: 380px;
	height: 400px;
}
.bottomLocation{
	bottom: 0px;
	position: absolute;
}

.backGroundColor{
	background-color: #333;
	color: #fff;
}
.divRadius{
	border-radius: 6px;
}
#deleteImg{
	width: 12px;
	height: 12px;
}
.recordImg{
	width: 22px;
	height: 22px;
}
#checkTest{
	display: none;
}
#checkTest + label{
	display: inline-block;
	width: 24px;
	height: 24px;
	border: 2px solid #bcbcbc;
	cursor: pointer;
}
#checkTest:checked + label:after{
	position: relative;
	top: -3px;
	left: 0px;
	content: '\2714';
	font-size: 25px;
}

.replyName{
	font-size: 11px;
}

</style>

<div style="background-color:white;">

<div style="padding: 10px;">

	<div id="titleSide">
		<table id="contentTable"  style="height: 90px;">
			<tr>
				<td rowspan="3" class="c_td01"><img id="contentProfile"
					src="../img/eili.jpg"></td>
				<td colspan="5" height="5px;"></td>
			</tr>
			<tr>

				<td class="c_td02"><img id="buttonPlay" name=bno class="song01"
					src="../img/buttonPlay.png"  "></td> <!-- 이 버튼에 클릭 이벤트.. -->

				<td class="c_td03" colspan="3" style="text-align: left;"><label
					id="contentTitle">일렉기타 한번 쳐봤어요</label></td>

				<td class="c_td04" style="text-align: right;"><label
					class="contentDate" style="font-size: 12px;">2015.02.05</label><br>
					<label id="contentWriter" style="font-size: 15px;">에일리</label></td>

			</tr>
			<tr>
				<td></td>
				
				<td colspan="4" align="right"> | 
				<!-- 플레이수 -->
				<img class="content_Icon" src="../img/icon_play.png"> : <label>4</label> | 
				<!-- 악기 -->
				<img class="content_Icon" src="../img/icon_electricguitar.png"> | 
				<!-- 장르 -->
				<label>Rock</label> |
				<!-- 추천수 -->
				<img class="content_Icon" src="../img/icon_good.png"> : <label>3</label> |
				<!-- 음원리플 겟수 -->
				<img class="content_Icon" src="../img/icon_reply.png"> : <label>5</label> |

				</td>
			</tr>
		</table>
	</div>

	<hr width="85%;" align="right">
	<div id="contentSide" style="text-align: right; padding: 5px;">
		<!-- 	<textarea onkeyup="resize(this)" style="width: 85%" > -->
<textarea style="width: 85%;" rows="5">
처음 써보는거라 어렵네요
손가락도 많이 아프고 ㅋㅋ
</textarea>
	</div>


	<div id="replySide" align="right">

		<hr width="85%;" align="right">

		
			<!-- ---------------------------------------- -->

			<table id="replyTable" style="width: 85%;">
<tr>
	<td rowspan="2" width="40px;" height="45px;"><img class="replyImg"
		src="../img/boa.jpg"></td>
	<td width="200px;" height="15px;"><label style="font-size: 12px;">BOA</label>
		<label class="contentDate" style="font-size: 8px;">2시간전</label>
	</td>
	<td></td>
	<td width="50px;" align="right"><img id="deleteImg"
		src="../img/symbol5-2.png"></td>
</tr>
<tr>
	<td colspan="4"><label class="replyFontSize" style="width: 100%;">처음 치곤 상당히 괜찮네요!</label>
	</td>
</tr>
<tr>
	<td colspan="5"></td>

</tr><!-- ----------------------------------------------------------------------------- -->
<tr>
	<td rowspan="2" width="40px;" height="45px;"><img class="replyImg"
		src="../img/psy.jpg"></td>
	<td width="200px;" height="15px;"><label style="font-size: 12px;">싸이</label>
		<label class="contentDate" style="font-size: 8px;">5시간전</label>
	</td>
	<td></td>
	<td width="50px;" align="right"><img id="deleteImg"
		src="../img/symbol5-2.png"></td>
</tr>
<tr>
	<td colspan="4"><label class="replyFontSize" style="width: 100%;">올ㅋ</label>
	</td>
</tr>
<tr>
	<td colspan="5"></td>

</tr>

<tr><!-- ----------------------------------------------------------------------------- -->
	<td rowspan="2" width="40px;" height="45px;"><img class="replyImg"
		src="../img/eili.jpg"></td>
	<td width="200px;" height="15px;"><label style="font-size: 12px;">에일리</label>
		<label class="contentDate" style="font-size: 8px;">6시간전</label>
	</td>
	<td></td>
	<td width="50px;" align="right"><img id="deleteImg"
		src="../img/symbol5-2.png"></td>
</tr>
<tr>
	<td colspan="4"><label class="replyFontSize" style="width: 100%;">모두 감사합니다!</label>
	</td>
</tr>
<tr>
	<td colspan="5"></td>

</tr>


			</table>

			<br>

			<table style="width: 85%;">

				<tr>
					<td colspan="4">
						<input type="text" style="width: 99%;">
					</td>
					<td width="50px;">
						<button>등록</button>
					</td>
				</tr>
			</table>
		
		<!-- ---------------------------------------- -->
	</div>
	<hr>
	<br>
</div>


<div style="padding: 10px;">

	<div id="titleSide">
		<table id="contentTable"  style="height: 90px;">
			<tr>
				<td rowspan="3" class="c_td01"><img id="contentProfile"
					src="../img/eili.jpg"></td>
				<td colspan="5" height="5px;"></td>
			</tr>
			<tr><!-- ----------------------------------------------------------------------------- -->

				<td class="c_td02"><img id="buttonPlay" name=bno class="song02"
					src="../img/buttonPlay.png"  "></td> <!-- 이 버튼에 클릭 이벤트.. -->

				<td class="c_td03" colspan="3" style="text-align: left;"><label
					id="contentTitle">하루한번 글쓰기!</label></td>

				<td class="c_td04" style="text-align: right;"><label
					class="contentDate" style="font-size: 12px;">2015.02.04</label><br>
					<label id="contentWriter" style="font-size: 15px;">에일리</label></td>

			</tr>
			<tr>
				<td></td>
				
				<td colspan="4" align="right"> | 
				<!-- 플레이수 -->
				<img class="content_Icon" src="../img/icon_play.png"> : <label>7</label> | 
				<!-- 악기 -->
				<img class="content_Icon" src="../img/icon_drum.png"> | 
				<!-- 장르 -->
				<label>Rock</label> |
				<!-- 추천수 -->
				<img class="content_Icon" src="../img/icon_good.png"> : <label>1</label> |
				<!-- 음원리플 겟수 -->
				<img class="content_Icon" src="../img/icon_reply.png"> : <label>1</label> |

				</td>
			</tr>
		</table>
	</div>

	<hr width="85%;" align="right">
	<div id="contentSide" style="text-align: right; padding: 5px;">
		<!-- 	<textarea onkeyup="resize(this)" style="width: 85%" > -->
		<textarea style="width: 85%;" rows="5">쿵짝 쿵짝! 신난다 ㅋ</textarea>
	</div>


	<div id="replySide" align="right">

		<hr width="85%;" align="right">

		
			<!-- ---------------------------------------- -->

			<table id="replyTable" style="width: 85%;">
<tr><!-- ----------------------------------------------------------------------------- -->
	<td rowspan="2" width="40px;" height="45px;"><img class="replyImg"
		src="../img/dasom.jpg"></td>
	<td width="200px;" height="15px;"><label style="font-size: 12px;">다솜</label>
		<label class="contentDate" style="font-size: 8px;">2015.02.05</label>
	</td>
	<td></td>
	<td width="50px;" align="right"><img id="deleteImg"
		src="../img/symbol5-2.png"></td>
</tr>
<tr>
	<td colspan="4"><label class="replyFontSize" style="width: 100%;">오호라!</label>
	</td>
</tr>
<tr>
	<td colspan="5"></td>

</tr>
<tr>
	<td rowspan="2" width="40px;" height="45px;"><img class="replyImg"
		src="../img/iu.jpg"></td>
	<td width="200px;" height="15px;"><label style="font-size: 12px;">아이유</label>
		<label class="contentDate" style="font-size: 8px;">2015.02.04</label>
	</td>
	<td></td>
	<td width="50px;" align="right"><img id="deleteImg"
		src="../img/symbol5-2.png"></td>
</tr>
<tr>
	<td colspan="4"><label class="replyFontSize" style="width: 100%;">옼ㅋㅋ 아이 씬나 ㅋㅋ</label>
	</td>
</tr>
<tr>
	<td colspan="5"></td>

</tr>
<tr>
	<td rowspan="2" width="40px;" height="45px;"><img class="replyImg"
		src="../img/psy.jpg"></td>
	<td width="200px;" height="15px;"><label style="font-size: 12px;">싸이</label>
		<label class="contentDate" style="font-size: 8px;">2015.02.04</label>
	</td>
	<td></td>
	<td width="50px;" align="right"><img id="deleteImg"
		src="../img/symbol5-2.png"></td>
</tr>
<tr>
	<td colspan="4"><label class="replyFontSize" style="width: 100%;">못하는게 없으시네요 ~</label>
	</td>
</tr>
<tr>
	<td colspan="5"></td>

</tr>


			</table>

			<br>

			<table style="width: 85%;">

				<tr>
					<td colspan="4">
						<input type="text" style="width: 99%;">
					</td>
					<td width="50px;">
						<button>등록</button>
					</td>
				</tr>
			</table>
		
		<!-- ---------------------------------------- -->
	</div>
	<hr>
	<br>
</div>

<div style="padding: 10px;">

	<div id="titleSide">
		<table id="contentTable"  style="height: 90px;">
			<tr>
				<td rowspan="3" class="c_td01"><img id="contentProfile"
					src="../img/eili.jpg"></td>
				<td colspan="5" height="5px;"></td>
			</tr>
			<tr>
<!-- ----------------------------------------------------------------------------- -->
				<td class="c_td02"><img id="buttonPlay" name=bno
					src="../img/buttonPlay.png"  onclick="test(this); "></td> <!-- 이 버튼에 클릭 이벤트.. -->

				<td class="c_td03" colspan="3" style="text-align: left;"><label
					id="contentTitle">이렇게 하는거 맞나요?</label></td>

				<td class="c_td04" style="text-align: right;"><label
					class="contentDate" style="font-size: 12px;">2015.02.03</label><br>
					<label id="contentWriter" style="font-size: 15px;">에일리</label></td>

			</tr>
			<tr>
				<td></td>
				
				<td colspan="4" align="right"> | 
				<!-- 플레이수 -->
				<img class="content_Icon" src="../img/icon_play.png"> : <label>7</label> | 
				<!-- 악기 -->
				<img class="content_Icon" src="../img/icon_electricguitar.png"> | 
				<!-- 장르 -->
				<label>Rock</label> |
				<!-- 추천수 -->
				<img class="content_Icon" src="../img/icon_good.png"> : <label>1</label> |
				<!-- 음원리플 겟수 -->
				<img class="content_Icon" src="../img/icon_reply.png"> : <label>1</label> |

				</td>
			</tr>
		</table>
	</div>

	<hr width="85%;" align="right">
	<div id="contentSide" style="text-align: right; padding: 5px;">
		<!-- 	<textarea onkeyup="resize(this)" style="width: 85%" > -->
		<textarea style="width: 85%;" rows="5">소리가 좀 불안정 한거 같기도 한데
어때요?</textarea>
	</div>


	<div id="replySide" align="right">

		<hr width="85%;" align="right">

		
			<!-- ---------------------------------------- -->

			<table id="replyTable" style="width: 85%;">
<tr>
	<td rowspan="2" width="40px;" height="45px;"><img class="replyImg"
		src="../img/jong.jpg"></td>
	<td width="200px;" height="15px;"><label style="font-size: 12px;">윤종신</label>
		<label class="contentDate" style="font-size: 8px;">2015.02.03</label>
	</td>
	<td></td>
	<td width="50px;" align="right"><img id="deleteImg"
		src="../img/symbol5-2.png"></td>
</tr>
<tr>
	<td colspan="4"><label class="replyFontSize" style="width: 100%;">약간 연습이 더 필요한것 같네요!</label>
	</td>
</tr>
<tr>
	<td colspan="5"></td>

</tr>


			</table>

			<br>

			<table style="width: 85%;">

				<tr>
					<td colspan="4">
						<input type="text" style="width: 99%;">
					</td>
					<td width="50px;">
						<button>등록</button>
					</td>
				</tr>
			</table>
		
		<!-- ---------------------------------------- -->
	</div>
	<hr>
	<br>
</div>

<div style="padding: 10px;">

	<div id="titleSide">
		<table id="contentTable"  style="height: 90px;">
			<tr>
				<td rowspan="3" class="c_td01"><img id="contentProfile"
					src="../img/eili.jpg"></td>
				<td colspan="5" height="5px;"></td>
			</tr>
			<tr>

				<td class="c_td02"><img id="buttonPlay" name=bno
					src="../img/buttonPlay.png"  onclick="test(this); "></td> <!-- 이 버튼에 클릭 이벤트.. -->

				<td class="c_td03" colspan="3" style="text-align: left;"><label
					id="contentTitle">악기 다루는거 재밌네요 ㅋ</label></td>

				<td class="c_td04" style="text-align: right;"><label
					class="contentDate" style="font-size: 12px;">2015.02.02</label><br>
					<label id="contentWriter" style="font-size: 15px;">에일리</label></td>

			</tr>
			<tr>
				<td></td>
				
				<td colspan="4" align="right"> | 
				<!-- 플레이수 -->
				<img class="content_Icon" src="../img/icon_play.png"> : <label>7</label> | 
				<!-- 악기 -->
				<img class="content_Icon" src="../img/icon_piano.png"> | 
				<!-- 장르 -->
				<label>Rock</label> |
				<!-- 추천수 -->
				<img class="content_Icon" src="../img/icon_good.png"> : <label>1</label> |
				<!-- 음원리플 겟수 -->
				<img class="content_Icon" src="../img/icon_reply.png"> : <label>1</label> |

				</td>
			</tr>
		</table>
	</div>

	<hr width="85%;" align="right">
	<div id="contentSide" style="text-align: right; padding: 5px;">
		<!-- 	<textarea onkeyup="resize(this)" style="width: 85%" > -->
		<textarea style="width: 85%;" rows="5">잘 부탁드립니다! ㅋㅋ
뭐부터 써볼까 히히</textarea>
	</div>


	<div id="replySide" align="right">

		<hr width="85%;" align="right">

		
			<!-- ---------------------------------------- -->

			<table id="replyTable" style="width: 85%;">
<tr>
	<td rowspan="2" width="40px;" height="45px;"><img class="replyImg"
		src="../img/iu.jpg"></td>
	<td width="200px;" height="15px;"><label style="font-size: 12px;">아이유</label>
		<label class="contentDate" style="font-size: 8px;">2015.02.02</label>
	</td>
	<td></td>
	<td width="50px;" align="right"><img id="deleteImg"
		src="../img/symbol5-2.png"></td>
</tr>
<tr>
	<td colspan="4"><label class="replyFontSize" style="width: 100%;">와 언니 반가워요 ㅋㅋ</label>
	</td>
</tr>
<tr>
	<td colspan="5"></td>

</tr>


			</table>

			<br>

			<table style="width: 85%;">

				<tr>
					<td colspan="4">
						<input type="text" style="width: 99%;">
					</td>
					<td width="50px;">
						<button>등록</button>
					</td>
				</tr>
			</table>
		
		<!-- ---------------------------------------- -->
	</div>
	<hr>
	<br>
</div>

<div style="text-align: center;">
<hr>
<label >더보기</label>
<hr>
</div>

<div class="secretDiv location divlocation" >
<div id="openSession"  class="totalWidth bottomLocation backGroundColor divRadius"  style=" text-align: center;">

	<label id="openDiv" style="font-size: 5px;" >JAM Session</label>
	<div id="hidePlayer">
<hr>
	<div id="playerContent" class=" backGroundColor ">
	<table class="totalWidth" style="color: white;"  >
	
	<!-- -----------플레이어 리플 부분--------------------------------------------------------------------플레이어 리플 부분 -->
		<tr>
			<td rowspan="2" style="width: 32px; text-align: center;">
				<img id="profileImg" src="../img/eili.jpg">
			</td>
			<td class="writerName">
				<label class="replyName">에일리</label>
				<img id="deleteImg" src="../img/symbol5.png">
			</td>
			<td style="text-align: right;">
				<label style="font-size: 8px;">2015.02.05</label> 
			</td>
			<td rowspan="2">
				
				 <input id="0" onclick="mute(this);" type="checkbox" style="width: 25px; height: 25px;" checked="checked">
				 
			<!-- 
				<button onclick="mute(this);" id="0" type='button' class="pbtns">mute</button>
				 -->
			</td>
		</tr>
		<tr>
			<td colspan="2" style="width: 80%; text-align: left;"><label>처음 써보는거라...</label></td>
		</tr>
		
		<!-- -----------플레이어 리플 부분--------------------------------------------------------------------플레이어 리플 부분 -->
		
		<tr>
			<td rowspan="2" style="width: 32px; text-align: center;">
				<img id="profileImg" src="../img/boa.jpg">
			</td>
			<td class="writerName">
				<label class="replyName">보아</label>
				<img id="deleteImg" src="../img/symbol5.png">
			</td>
			<td style="text-align: right;">
				<label style="font-size: 8px;">2015.02.05</label> 
			</td>
			<td rowspan="2">
				
				 <input id="1" onclick="mute(this);" type="checkbox" style="width: 25px; height: 25px;" checked="checked">
				 
			<!-- 
				<button onclick="mute(this);" id="1" type='button' class="pbtns">mute</button>
 -->
			</td>
		</tr>
		<tr>
			<td colspan="2" style="width: 80%; text-align: left;"><label>저도 한번 해봤어요!</label></td>
		</tr>
		
		<!-- -----------플레이어 리플 부분--------------------------------------------------------------------플레이어 리플 부분 -->
		
		<tr>
			<td rowspan="2" style="width: 32px; text-align: center;">
				<img id="profileImg" src="../img/psy.jpg">
			</td>
			<td class="writerName">
				<label class="replyName">싸이</label>
				<img id="deleteImg" src="../img/symbol5.png">
			</td>
			<td style="text-align: right;">
				<label style="font-size: 8px;">2015.02.06</label> 
			</td>
			<td rowspan="2">
			
				 <input id="2" onclick="mute(this);" type="checkbox" style="width: 25px; height: 25px;" checked="checked">
			
			</td>
		</tr>
		<tr>
			<td colspan="2" style="width: 80%; text-align: left;"><label>내가 빠질수 없지!</label></td>
		</tr>
		
		<!-- -----------플레이어 리플 부분--------------------------------------------------------------------플레이어 리플 부분 -->
		
		<tr>
			<td rowspan="2" style="width: 32px; text-align: center;">
				<img id="profileImg" src="../img/dasom.jpg">
			</td>
			<td class="writerName">
				<label class="replyName">다솜</label>
				<img id="deleteImg" src="../img/symbol5.png">
			</td>
			<td style="text-align: right;">
				<label style="font-size: 8px;">2015.02.06</label> 
			</td>
			<td rowspan="2">
			
				 <input id="3" onclick="mute(this);" type="checkbox" style="width: 25px; height: 25px;" checked="checked">
			
			</td>
		</tr>
		<tr>
			<td colspan="2" style="width: 80%; text-align: left;"><label>에라 모르겠다 ㅋㅋㅋ</label></td>
		</tr>
	</table>
	</div>
	<hr>
	
	
	<div id="recordForm">
		<table  class="totalWidth" >
			<tr>
				<td  colspan="2" width="84%" style="text-align: left;">
					<input placeholder="Comment" type="text" size="35px;">
				</td>
				<td >
					<button class="pbtns">등록</button><br>
				</td>
			</tr>
			<tr>
				<td width="40%;" style="text-align: left;">

					<img class="recordImg" onclick="startRecording(this);" src="../img/media-record-1.png">
					<img class="recordImg" onclick="stopRecording(this);" src="../img/media-stop2-1.png">
					<img id="micCheck" class="recordImg" onclick="micSetting(this)" src="../img/voice15.png">

					 
				</td>
				<td width="35%;"><label id="log">audio check</label></td>
				<td width="15%;"><button class="pbtns">취소</button></td>
			</tr>
		</table>
		
		<table id="recordingslist" style="text-align: center;"></table>
		
	</div>
	<hr>
</div>


	<div id="playerForm"  class="backGroundColor">
	<table class="totalWidth" >
		<tr >
			<td rowspan="2" style="width: 50px; text-align: center;">
				<div id="status"  style="width: 100%; height: 100%; color: white;"> - </div>
				<img id="playBtn" onclick="playSound();" class="playerBtn"
					src="../img/buttonPlay.png"> 
				<img id="stopBtn" onclick="stopSound();" class="playerBtn" 
					src="../img/buttonStop.png">
			</td>
			<td colspan="2" style="width: 180px;">
				<label id="titleSize">
					<marquee scrolldelay="200" id="titleBar" style="color: white;" >곡을 선택해주세요</marquee>
				</label>
			</td>
			<td class="writerName" style="text-align: center; ">
				<label id="writerSize" style="color: white;"> - </label>
			</td>
		</tr>
		<tr style="text-align: center; font-size: 12px; color: white;">
			<td>
				<label id="time1-1">00</label> : <label id="time1-2">00</label>
				/ <label id="time2-1">00</label> : <label id="time2-2">00</label>
			</td>
			<td >
				<img id="speaker" src="../img/speaker-2.png" class="iconSize">
			</td>
			<td>			
				<input id="slider" type="range"  min="0" value="50" max="100" 
				step="1" onchange="changeVolume(this.value)" />
			</td>
		</tr>
	</table>
	
	</div>
</div>
</div>
</div>
<script>
	//------------------------------------------------------------------------
	var changeTitle = document.getElementById("titleBar");
	var changeWriter = document.getElementById("writerSize");
	
	var assetsPath = "../fileupload-music/";
	
	$(".song01").click(function() {
		var manifest = [ {
			id : "soundID0",
			src : assetsPath + "01BackInBlack.mp3"
		}, {
			id : "soundID1",
			src : assetsPath + "029Aerosmith.mp3"
		}, {
			id : "soundID2",
			src : assetsPath + "05IWantMyTearsBack.mp3"
		}, {
			id : "soundID3",
			src : assetsPath + "PainRedefined.mp3"
		} ];

		changeTitle.innerText = "일렉기타 한번 쳐봤어요";
		changeWriter.innerText = "에일리";
		
		init(manifest);
		
		return false;
	});
	$(".song02").click(function() {
		var manifest = [ {
			id : "soundID0",
			src : assetsPath + "01BackInBlack.mp3"
		}, {
			id : "soundID1",
			src : assetsPath + "029Aerosmith.mp3"
		}, {
			id : "soundID2",
			src : assetsPath + "05IWantMyTearsBack.mp3"
		}, {
			id : "soundID3",
			src : assetsPath + "PainRedefined.mp3"
		} ];

		changeTitle.innerText = "하루한번 글쓰기!";
		changeWriter.innerText = "에일리";

		init(manifest);
		
		return false;
	});
	
	
	
	//------------------------------------------------------------------------
	$("#playBtn").hide();

	$("#hidePlayer").hide();
	
	$("#openDiv").click(function() {
		
		$("#hidePlayer:visible").slideUp("middle");
		$(this).next('#hidePlayer:hidden').slideDown("middle");

		return false;
	})
	
	$("#stopBtn").hide();
	$("#playBtn").click(function() {
		$("#stopBtn").show();
		$("#playBtn").hide();
	});
	$("#stopBtn").click(function() {
		$("#stopBtn").hide();
		$("#playBtn").show();
	});
	

	var params = {};
	var pieces = window.location.search.slice(1).split("&");
	for (var i = 0, l = pieces.length; i < l; i++) {
		var parts = pieces[i].split("=");
		params[parts[0]] = parts[1];
	}

	var queue;
	var displayStatus;

	//interval 종료용
	var intervalName;

	//메인 음원의 총 플레이 시간
	var timeTS;
	
	function micSetting(button){
		
		//마이크 사용중인경우 또 못누르도록..
		$('#micCheck').attr('disabled',true);
		
		//recorder 준비 부분 //
		try {
			// webkit shim
			window.AudioContext = window.AudioContext
					|| window.webkitAudioContext;
			navigator.getUserMedia = (navigator.getUserMedia
					|| navigator.webkitGetUserMedia
					|| navigator.mozGetUserMedia || navigator.msGetUserMedia);
			window.URL = window.URL || window.webkitURL;

			audio_context = new AudioContext;

			 __log('set up.');
			 __log(navigator.getUserMedia ? 'available.'
								: 'not present!');

			button.disabled = true;
		} catch (e) {
			alert('No web audio support in this browser!');
		}

		navigator.getUserMedia({
			audio : true
		}, startUserMedia, function(e) {
			__log('No live audio input: ' + e);
		});

	}
	
	function init(manifest) {
		
		
		/* 
		__log('load');
		$("#status").show();
		$("#playBtn").hide();
		$("#stopBtn").hide();  
		*/
		//마이크 사용허가 부분 분리
		
		//player 준비 부분
		createjs.FlashAudioPlugin.swfPath = "../flashaudio/";

		if (params.type == "flash") {
			createjs.Sound.registerPlugins([ createjs.FlashAudioPlugin ]);
		} else if (params.type == "html5") {
			createjs.Sound.registerPlugins([ createjs.HTMLAudioPlugin ]);
		} else {
			createjs.Sound.registerPlugins([ createjs.WebAudioPlugin,
					createjs.HTMLAudioPlugin, createjs.FlashAudioPlugin ]);
		}

		displayStatus = document.getElementById("status");
		reLoading();

		//로딩을 위해 manifest 에 담는다.
		/* 
		var assetsPath = "../music/";
		var manifest = [ {
			id : "soundID0",
			src : assetsPath + "Metallica - My Apocalypse.mp3"
		}, {
			id : "soundID1",
			src : assetsPath + "029 - Aerosmith - Dream On.mp3"
		}, {
			id : "soundID2",
			src : assetsPath + "Incubus-04-Anna Molly.mp3"
		}, {
			id : "soundID3",
			src : assetsPath + "Disturbed-14-Pain Redefined.mp3"
		} ];
 		 */
		// 큐 생성.. 
		queue = new createjs.LoadQueue();
		createjs.Sound.alternateExtensions = [ "mp3" ];
		queue.installPlugin(createjs.Sound);
		queue.addEventListener("complete", loadComplete);
		queue.addEventListener("fileload", fileComplete);
		queue.addEventListener("error", handleFileError);
		queue.addEventListener("fileprogress", handleFileProgress);
		queue.addEventListener("progress", handleProgress);
		queue.loadManifest(manifest);

	}

	function handleFileError(evt) {
		console.log("error ", evt);
		displayStatus.innerText = "Error"
	}

	function handleFileProgress(evt) {
		displayStatus.innerText = (queue.progress.toFixed(2) * 100) + "%";
	}

	function handleProgress(evt) {
		displayStatus.innerText = (queue.progress.toFixed(2) * 100) + "%";
	}

	function loadComplete(evt) {
		// 로드 완료
		displayStatus.innerText = "Done";
		 
		$("#playBtn").show();
		$("#status").hide();
	}
	function reLoading(){
		displayStatus.innerText = "load";
		 
		$("#playBtn").hide();
		$("#stopBtn").hide();
		$("#status").show();
	}

	function fileComplete(evt) {
		console.log("Callback file loaded ", evt);
	}
	function playSound() {

		stopSound();

		//불러온 음원을 동시에 실행 
		
		playList = [ {
			id : createjs.Sound.play("soundID0")
		}, {
			id : createjs.Sound.play("soundID1")
		}, {
			id : createjs.Sound.play("soundID2")
		}, {
			id : createjs.Sound.play("soundID3")
		} ];

		playTimer(playList[0].id);

	}
	function playTimer(sound) {

		var soundTime = sound.duration; // ms 단위로

		timeTS = parseInt(soundTime / 1000) + 1;

		var timeM = parseInt((soundTime / 1000) / 60);
		var timeS = parseInt(soundTime / 1000) % 60;

		if (timeM < 10) {
			timeM = "0" + timeM;
		}
		if (timeS < 10) {
			timeS = "0" + timeS;
		} else {
			timeS = timeS;
		}

		//음원의 시간 표시용
		document.getElementById('time2-1').innerText = timeM;
		document.getElementById('time2-2').innerText = timeS;

		var countTS = 0;
		var countM = 0;
		var countS = 0;
		var viewS;
		var viewM;

		intervalName = setInterval(function() {

			countTS++;

			if ((countTS + 1) == timeTS) { // 플레이 완료시
				stopSound(); // 사운드 종료
			}

			// 초 단위 표시용
			if (countS < 59) {
				countS++;
			} else {
				countM++;
				countS = 0;
			}

			// 00 01 형태로 만들기 위한 부분
			if (countM < 10) {
				viewM = "0" + countM;
			} else {
				viewM = countM;
			}
			if (countS < 10) {
				viewS = "0" + countS;
			} else {
				viewS = countS;
			}

			document.getElementById('time1-1').innerText = viewM;
			document.getElementById('time1-2').innerText = viewS;
		}, 1000);
	}

	function stopSound() {
		createjs.Sound.stop();
		clearInterval(intervalName);

		//시간을 00:00 형태로 만들기 위해
		document.getElementById('time1-1').innerText = "00";
		document.getElementById('time1-2').innerText = "00";
		
	}

	// 볼륨 조절	
	var changeVolume = function(val) {
		createjs.Sound.setVolume(val / 100);
	}

	//-----------------------------------------------------------------------//

	function mute(e) {

		var eid = parseInt(e.id);
		if (playList[eid].id.getMuted()) {
			playList[eid].id.setMuted(false);
		} else {
			playList[eid].id.setMuted(true);
		}

		if (e.classList.contains("mute")) {
			e.classList.remove("mute");
		} else {
			e.classList.add("mute");
		}
	}

	//---------------------------------------------------------------------//
	//녹음 파트. 
	function __log(e, data) {
		log.innerHTML = "\n" + e + " " + (data || '');
	}

	var mp3Blob;
	var audio_context;
	var recorder;

	function startUserMedia(stream) {
		var input = audio_context.createMediaStreamSource(stream);
		__log('Media stream created.');
		__log("input sample rate " + input.context.sampleRate);

		input.connect(audio_context.destination);
		__log('Input connected to audio context destination.');

		recorder = new Recorder(input);
		__log('Ready');
	}

	function startRecording(button) {
		recorder && recorder.record();
		button.disabled = true;
		button.nextElementSibling.disabled = false;
		__log('Recording...');

		playSound();
		
		
		$("#stopBtn").show();
		$("#playBtn").hide();
	
	}

	function stopRecording(button) {
		recorder && recorder.stop();
		button.disabled = true;
		button.previousElementSibling.disabled = false;
		__log('Stopped');

		// create WAV download link using audio data blob
		createDownloadLink();

		recorder.clear();
		stopSound();
		$("#stopBtn").hide();
		$("#playBtn").show();
	}

	//wav 파일 다운로드 생성
	function createDownloadLink() {
		recorder && recorder.exportWAV(function(blob) {
			/*var url = URL.createObjectURL(blob);
			var li = document.createElement('li');
			var au = document.createElement('audio');
			var hf = document.createElement('a');
			
			au.controls = true;
			au.src = url;
			hf.href = url;
			hf.download = new Date().toISOString() + '.wav';
			hf.innerHTML = hf.download;
			li.appendChild(au);
			li.appendChild(hf);
			recordingslist.appendChild(li);*/
		});
	}
	
</script>




